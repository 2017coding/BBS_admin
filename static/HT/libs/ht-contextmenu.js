!function(d,M){"use strict";var i="ht",A=d[i],e="position",V="absolute",Y="px",b="left",f="top",I="innerHTML",L="className",X="width",r="height",g="0",F="display",U="none",N="visibility",K="user-select",t="margin",O="padding",p=null,D=A.Color,T=A.Default,$=T.getInternal(),k=d.setTimeout,l=d.setInterval,z=d.clearTimeout,h=d.clearInterval,_=d.parseInt,w=T.isLeftButton,m=T.isDragging,G=T.startDragging,S=T.getDistance,W=T.isTouchable,n=D.widgetIconHighlight,c=D.widgetIconBorder,Z=D.widgetIconGradient,s=function(){return document},R=function(Z,r){return Z.querySelectorAll(r)},a=function(n){var y=s().createElement(n);return"ul"===n&&(v(y,e,"relative"),v(y,t,g),v(y,O,g),v(y,"list-style",U),v(y,"box-sizing","border-box"),v(y,"-moz-box-sizing","border-box"),v(y,F,"inline-block"),v(y,"vertical-align","text-bottom"),v(y,"border","1px solid "+T.contextMenuBorderColor),v(y,"box-shadow","0 0 16px 1px "+T.contextMenuShadowColor),v(y,"overflow","hidden"),T.contextMenuBorderRadius&&v(y,"border-radius",T.contextMenuBorderRadius+Y)),y},H=function(j){var T=j.touches[0];return T?T:j.changedTouches[0]},o=function(){return a("div")},y=function(){return a("canvas")},v=function(t,W,n){t.style.setProperty(W,n,p)},x=function(w,F,b){T.def(A.widget[w],F,b)},C=function(z,b){z.appendChild(b)},q=function(k,u){k.removeChild(u)},Q=function(X,x,a,z){X.addEventListener(x,a,!!z)},u=function(O,M,j,J){O.removeEventListener(M,j,!!J)};$.addMethod(T,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:c},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:n}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:c},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:n,gradient:T.imageGradient,gradientColor:Z,background:n}]},contextMenuLabelFont:(W?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var J=function(K){var P=this,o=K._view;if(P.$11b=K,P.addListeners(),Q(o,"contextmenu",function(K){K.preventDefault()}),!W){var T=P.$37b=P.$36b.bind(P);Q(o,"mouseover",T),Q(o,"mouseout",T)}};T.def(J,M,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(r){if(T.preventDefault(r),w(r)){for(var e=this,Y=e.$11b,N=e.getView(),I=N.children,d=0;d<I.length;d++){var j=I[d],J=j.$24b,s=j.$25b;if(J&&J.contains(r.target))return Y.scrollUp(j),e.$28b=k(function(){e.$29b=l(function(){Y.scrollUp(j)},100)},500),G(e,r),void 0;if(s&&s.contains(r.target))return Y.scrollDown(j),e.$28b=k(function(){e.$29b=l(function(){Y.scrollDown(j)},100)},500),G(e,r),void 0}W&&(r=H(r)),e.$30b={x:r.pageX,y:r.pageY}}},handle_mousedown:function(S){this.handle_touchstart(S)},handle_touchend:function(c){if(w(c)){var B=this,r=B.$30b,u=W?{x:H(c).pageX,y:H(c).pageY}:{x:c.pageX,y:c.pageY};if(!r||S(r,u)>1)return delete B.$30b,void 0;for(var b=B.getView(),s=B.$11b,G=c.target,n=p,O=p,X=s._items,v=b.$26b,E=0;E<v.length;E++)if(O=v[E],O.contains(G)){n=O.getAttribute("data-id");break}if(n&&X){var N=s.$17b(X,function(E){return E._id===n});if(N){var m=!1;N.disabled instanceof Function?m=N.disabled.call(s,N):N.disabled===!0&&(m=!0),m||(N.items?W&&B.$36b(O,!0):s.$1b(N,c))}}delete B.$30b}},$36b:function(u,l){if(!m()){var w,s=this,C=s.$11b,G=s.getView(),J=C.$20b||G.children[0],i=C.$19b,V=G.$26b,F=G.children,_=u.target,e=G.getBoundingClientRect(),O=T.getWindowInfo(),y=O.width,A=O.height,M=function(K){for(var g=0;g<F.length;g++){var a=F[g],c=new RegExp(K+"$"),z=a[L];if(z&&(c.test(z)||z.indexOf(K+" ")>=0))return a}},r=function(C){for(var Y=0;Y<V.length;Y++){var X=V[Y],r=new RegExp(C+"$"),B=X[L];if(B&&(r.test(B)||B.indexOf(C+" ")>=0))return X}},k=function(o){var a=r("menu-item"+o.$45b),x=a.getBoundingClientRect(),S=x.top-e.top,V=x.left-e.left;v(o,f,S+Y),v(o,b,V+x.width+Y);var i=o.getBoundingClientRect(),O=i.top,D=i.left,I=i.height,k=i.width,w=O+I+2,Q=D+k+2;w>A&&v(o,f,S+A-w+Y),Q>y&&v(o,b,V-k+Y)};if(l)w=u;else{if("mouseover"===u.type){for(var h=0;h<V.length;h++){var o=V[h];if(o.contains(_)){w=o;break}}if(!w&&i){var q=i.parentNode,X=M("submenu"+i.getAttribute("data-id"));(X&&X.contains(_)||q&&q.contains(_))&&(w=i)}}else if("mouseout"===u.type){for(var z=!1,j=u.relatedTarget,h=0;h<F.length;h++){var p=F[h];if("hidden"!==p.style.visibility&&p.contains(j)){z=!0;break}}if(z)return}!w&&J&&(w=r("menu-item"+(J.$45b||"NaN")))}if(w!=i){if(i)for(var t=i;t;){if(t[L]=t[L].replace(" menu-item-hover",""),t[L].indexOf("disabled")<0){var $=C.getItemByProperty("_id",t.getAttribute("data-id"));null!=$.background?$.background instanceof Function?v(t,"background-color",$.background.call(C,$)):v(t,"background-color",$.background):v(t,"background-color",T.contextMenuBackground),v(t,"color",T.contextMenuLabelColor)}var Q=M("submenu"+t.getAttribute("data-id"));Q&&v(Q,N,"hidden");var g=t.parentNode;t=r("menu-item"+(g.$45b||"NaN"))}if(w){for(var x=w,P=[];x;){x[L]+=" menu-item-hover",x[L].indexOf("disabled")<0&&(v(x,"background-color",T.contextMenuHoverBackground),v(x,"color",T.contextMenuHoverLabelColor));var E=M("submenu"+x.getAttribute("data-id"));E&&(v(E,N,"visible"),P.push(E));var g=x.parentNode;x=r("menu-item"+(g.$45b||"NaN"))}P.reverse(),P.forEach(function(O){k(O)})}}C.$19b=w,C.$20b=w?w.parentNode:G.children[0]}},handle_mouseup:function(N){this.handle_touchend(N)},handleWindowTouchEnd:function(){var l=this;l.$28b!=p&&(z(l.$28b),delete l.$28b),l.$29b!=p&&(h(l.$29b),delete l.$29b),delete l.$34b,delete l.$30b,delete l.$35b},handleWindowMouseUp:function(S){this.handleWindowTouchEnd(S)},handle_mousemove:function(N){this.handle_touchmove(N)},handle_touchmove:function(b){if(!m()&&w(b)){for(var r=this,U=r.getView().children,g=p,d=0;d<U.length;d++){var f=U[d];if(f.contains(b.target)){g=f;break}}var Q=r.$30b,P=W?{x:H(b).pageX,y:H(b).pageY}:{x:b.pageX,y:b.pageY};g&&Q&&S(Q,P)>2&&(G(r,b),r.$34b=g,r.$35b=g.$18b)}},handleWindowTouchMove:function(s){s.preventDefault();var z=this,m=z.$11b,p=z.$34b,P=z.$35b,x=z.$30b;if(x&&p){var E=W?{x:H(s).pageX,y:H(s).pageY}:{x:s.pageX,y:s.pageY},D=E.y-x.y;D>0?m.scrollUp(p,p.$18b-(P-D)):m.scrollDown(p,P-D-p.$18b)}},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},$10b:function(b,f){b.preventDefault();for(var D=this,U=D.getView().children,T=p,w=0;w<U.length;w++){var S=U[w];if(S.contains(b.target)){T=S;break}}if(T){var x=this.$11b,m=x.getRowHeight();Math.abs(f)>.05&&(f>0?x.scrollUp(T,f*m):0>f&&x.scrollDown(T,-f*m))}},handle_mousewheel:function(C){this.$10b(C,C.wheelDelta/40)},handle_DOMMouseScroll:function(I){this.$10b(I,-I.detail)},$44b:function(p){this.getView().contains(p.target)||this.$11b.hide()},$41b:function(u){this.$11b.show(u)},$4b:function(l,T){var G=this.$11b;if(T=T||G._items,T&&T.length&&l.keyCode){var B=[l.keyCode];l.shiftKey&&B.push(16),l.ctrlKey&&B.push(17),l.altKey&&B.push(18),/mac/.test(d.navigator?d.navigator.userAgent.toLowerCase():"")?l.metaKey&&B.push(17):l.metaKey&&B.push(91),B.sort();var o=B.join(),H=G.$17b(T,function(B){if(B.key){var p=B.key.slice(0);return p.sort(),o===p.join()}});if(H){H.preventDefault!==!1&&l.preventDefault();var C=!1;H.disabled instanceof Function?C=H.disabled.call(G,H):H.disabled===!0&&(C=!0),C||G.$1b(H,l)}}},$39b:function(R){var w=this,O=H(R);w.$32b={x:O.pageX,y:O.pageY}},$38b:function(X){var P=this,x=H(X);P.$31b={x:x.pageX,y:x.pageY},P.$33b=k(function(){P.$31b&&(P.$32b?S(P.$31b,P.$32b)<10&&P.$11b.show(X):P.$11b.show(X)),delete P.$33b,delete P.$31b,delete P.$32b},600)},$40b:function(){var t=this;t.$33b!=p&&(z(t.$33b),delete t.$33b,delete t.$31b,delete t.$32b)}}),A.widget.ContextMenu=function(u){var r=this,o=r._view=$.createView(null,r);o[L]="ht-widget-contextmenu",r.setItems(u),r.$13b=new J(r),v(o,"font",T.contextMenuLabelFont),v(o,e,V),v(o,"cursor","default"),v(o,"-webkit-"+K,U),v(o,"-moz-"+K,U),v(o,"-ms-"+K,U),v(o,K,U),v(o,"box-sizing","border-box"),v(o,"-moz-box-sizing","border-box"),T.baseZIndex!=p&&v(o,"z-index",_(T.baseZIndex)+2+""),r.$3b=function(e){r.$13b.$4b(e)}},x("ContextMenu",M,{$5b:0,_items:p,$21b:p,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var u=this,$=u._enableGlobalKey;$===!1&&(Q(s(),"keydown",u.$3b),u._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,u(s(),"keydown",this.$3b)},setItems:function(g){this._items=g},getItems:function(){return this._items},setVisibleFunc:function(F){this.$16b=F},setLabelMaxWidth:function(K){this.$43b=K},$1b:function(r,Z){var b=this;if("check"===r.type)r.selected=!r.selected;else if("radio"===r.type){var i=r.groupId;b.$17b(b._items,function(Z){Z.groupId===i&&(Z.selected=!1)}),r.selected=!0}if(b.hide(),r.action)r.action.apply(r.scope||b,[r,Z]);else if(r.href){var c=r.linkTarget||"_self";d.open(r.href,c)}},getItemById:function(q){return this.getItemByProperty("id",q)},setItemVisible:function(t,J){var f=this.getItemById(t);f&&(f.visible=J)},getItemByProperty:function(I,d,z){var j=this;if(z=z||j._items,!z||0===z.length)return p;var g=j.$17b(z,function(A){return A[I]===d});return g||p},scrollUp:function(k,w){var e=this;if(w=w==p?20:w,w=_(w),0!==w){var S=0;k.$18b>w&&(S=k.$18b-w),e.$42b(k,S),k.scrollTop=S,k.$18b=S}},scrollDown:function($,I){var G=this;if(I=I==p?20:I,I=_(I),0!==I){var R=$.$22b,O=$.$23b,D=R-O;O+$.$18b+I<R&&(D=$.$18b+I),G.$42b($,D),$.scrollTop=D,$.$18b=D}},$42b:function(l,h){h=h==p?l.$18b:h;var Q=l.$24b,q=l.$25b;Q&&(v(Q,"top",h+Y),0==h?v(Q,F,U):v(Q,F,"block")),q&&(v(q,"bottom",-h+Y),h==l.$22b-l.$23b?v(q,F,U):v(q,F,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(g,U){for(var h=0;h<g.length;h++){var k=g[h];if(U(k))return k;if(k.items){var b=this.$17b(k.items,U);if(b)return b}}},$2b:function(d,U){for(var l=this,G=0;G<d.length;G++){l.$5b++;var H=d[G];if(H.visible!==!1&&!(T.isFunction(H.visible)&&H.visible()===!1||l.$16b&&!l.$16b.call(l,H))){var f=a("li"),s=l.$5b+"";if(v(f,"white-space","nowrap"),v(f,F,"block"),"separator"===H||H.separator===!0){var P=o();P[L]="separator",v(P,r,T.contextMenuSeparatorWidth+Y),v(P,"background",T.contextMenuSeparatorColor),C(f,P)}else{H._id=s,f.setAttribute("data-id",s);var n=a("span"),D=a("span"),B=y(),R=o();if(v(n,F,"inline-block"),v(n,r,"1.2em"),v(D,F,"inline-block"),v(D,r,"1.2em"),v(D,"line-height","1.2em"),B[L]="prefix",v(B,F,"inline-block"),v(B,X,"1em"),v(B,r,"1em"),v(B,"vertical-align","middle"),v(B,t,"0 0.2em"),"check"===H.type&&H.selected?B[L]+=" check-prefix":"radio"===H.type&&H.selected&&(B[L]+=" radio-prefix"),C(f,B),H.icon){var Q=y();Q[L]="contextmenu-item-icon",v(Q,F,"inline-block"),v(Q,r,"1.2em"),v(Q,X,"1.2em"),v(Q,"margin-right","0.2em"),v(Q,"float","left"),Q.$50b=H.icon,Q._item=H,C(n,Q)}if(D[I]=H.label,C(n,D),C(f,n),R[L]="suffix",v(R,F,"inline-block"),v(R,"margin-left","1em"),v(R,"margin-right","0.4em"),v(R,"text-align","right"),v(R,"font-size","75%"),H.items&&(R[I]=T.contextMenuSubmenuMark),H.suffix&&(R[I]=H.suffix),C(f,R),f[L]="menu-item menu-item"+s,null!=H.background?H.background instanceof Function?v(f,"background-color",H.background.call(l,H)):v(f,"background-color",H.background):v(f,"background-color",T.contextMenuBackground),v(f,"color",T.contextMenuLabelColor),v(f,O,"3px 0"),H.disabled instanceof Function){var k=H.disabled.call(l,H);k&&(f[L]+=" disabled",v(f,"color",T.contextMenuDisabledLabelColor))}else H.disabled&&(f[L]+=" disabled",v(f,"color",T.contextMenuDisabledLabelColor));if(H.items){l.$21b||(l.$21b=new A.List);var Z=a("ul");Z[L]="submenu"+s,Z.$45b=s,v(Z,N,"hidden"),v(Z,e,V),C(l._view,Z),l.$21b.add(Z),l.$2b(H.items,Z)}}C(U,f)}}},rebuild:function(){var O=this,u=O._items,d=O._view;if(d&&(d[I]="",O.$21b=p,O.$5b=0,O.$19b=p,O.$20b=p,d.$26b=p,u&&0!==u.length)){var n=a("ul",O._r);C(d,n),O.$2b(u,n)}},addTo:function(L){if(L){var G=this,T=G.$13b;if(G.$12b=L,G.$9b=function(p){T.$44b(p)},G.$27b=function(B){T.$41b(B)},W){var m=G.$6b=function(u){T.$38b(u)},l=G.$7b=function(C){T.$39b(C)},p=G.$8b=function(R){T.$40b(R)};Q(L,"touchstart",m,!0),Q(L,"touchmove",l),Q(L,"touchend",p)}else Q(L,"contextmenu",G.$27b)}},showOnView:function(Z,G,r){Z=Z.getView?Z.getView():Z;var d=T.getWindowInfo(),k=Z.getBoundingClientRect();this.show(k.left+d.left+G,k.top+d.top+r)},show:function(D,K,A){var u=this,A=A==p?!0:!1,c=u._view;if(c){if(u.invalidate(),1===arguments.length){var l=D;if(W){var r=H(l);D=r.pageX,K=r.pageY}else D=l.pageX,K=l.pageY}var h=T.getWindowInfo(),q=h.width,w=h.height,Z=h.left,O=h.top,a={pageX:D,pageY:K,clientX:D-Z,clientY:K-O,target:1,originEvent:l},_=a.clientX,E=a.clientY,x=function(h){h.style.height=w-6+Y;var J=o(),N=o(),Z=function(H){v(H,e,V),v(H,"text-align","center"),v(H,X,"100%"),v(H,"font-size",10+Y),v(H,"padding","2px 0"),v(H,"border","0px solid "+T.contextMenuScrollerBorderColor),v(H,"background-color",T.contextMenuScrollerColor1),H.style.backgroundImage="-webkit-linear-gradient(top, "+T.contextMenuScrollerColor1+", "+T.contextMenuScrollerColor2+")",H.style.backgroundImage="linear-gradient(to bottom, "+T.contextMenuScrollerColor1+", "+T.contextMenuScrollerColor2+")"};J[L]="menu-arrow-item menu-arrow-item-top",N[L]="menu-arrow-item menu-arrow-item-bottom",Z(J),v(J,"top",g),v(J,"left",g),v(J,"border-bottom-width",1+Y),J[I]="▲",Z(N),v(N,"bottom",g),v(N,"left",g),v(N,"border-top-width",1+Y),N[I]="▼",h.$24b=J,h.$25b=N,h.$18b=h.scrollTop,h.$22b=h.scrollHeight,h.$23b=h.clientHeight,C(h,J),C(h,N),u.$42b(h)};u.beforeShow&&u.beforeShow(a);var S=u._items;if(S&&(l&&l.preventDefault(),S.length)){u.rebuild(),T.appendToScreen(c),c.$26b=R(c,".menu-item");var M=c.children[0];M.offsetHeight>w&&x(M);var P=E+(A?1:0),k=_+(A?1:0),n=function(w){for(var T=0,L=0,f=0,j=u.$43b;f<w.children.length;f++){var t=w.children[f];if(t.getAttribute("data-id")){var s=t.children[1],k=t.children[2],z=s.children;if(j){var G=z[0];z.length>1&&(G=z[1]),G.offsetWidth>j&&(G[I]="<marquee scrollamount='3'>"+G[I]+"</marquee>",G.children[0].style.verticalAlign="text-bottom",v(G,X,j+Y),v(G,F,"inline-block"))}var d=s.offsetWidth,b=k.offsetWidth;d>T&&(T=d),b>L&&(L=b)}}for(f=0;f<w.children.length;f++){var t=w.children[f];if(t.getAttribute("data-id")){var s=t.children[1],k=t.children[2],x=s.children[0],p=s.children[1];!p&&x.style.width&&v(x,X,T+Y),v(s,X,T+Y),v(k,X,L+Y)}}};n(M);var N=E+3+c.offsetHeight,t=_+3+c.offsetWidth;N>w?v(c,f,P-(N-w)+O+Y):v(c,f,P+O+Y),t>q?v(c,b,k-(t-q)+Z+Y):v(c,b,k+Z+Y);var y=u.$21b;y&&y.each(function(l){n(l),l.offsetHeight>w&&x(l)}),u.$9b&&Q(s(),W?"touchstart":"mousedown",u.$9b,!0),u.afterShow&&u.afterShow(a),u.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=p:!1},getRelatedView:function(){return this.$12b},hide:function(){var z=this,Z=z._view;Z&&Z.parentNode&&(q(Z.parentNode,Z),u(s(),W?"touchstart":"mousedown",z.$9b,!0),z.afterHide&&z.afterHide())},dispose:function(){var r=this,C=r.$12b,U=r._view;U&&(U.parentNode&&q(U.parentNode,U),r.disableGlobalKey(),C&&(W?(u(C,"touchstart",r.$6b,!0),u(C,"touchmove",r.$7b),u(C,"touchend",r.$8b)):u(C,"contextmenu",r.$27b)),r._view=r._items=r.$21b=r.$19b=r.$12b=r.beforeShow=r.afterShow=r.afterHide=r.$9b=r.$3b=r.$6b=r.$7b=r.$8b=r.$27b=p)},$46b:function(D,w,L,S,R){var B=$.initContext(D);$.translateAndScale(B,0,0,1),B.clearRect(0,0,L,S),T.drawStretchImage(B,T.getImage(w),"fill",0,0,L,S,R,this),B.restore()},$47b:function(){var v,e,x,L=this,l=L._view;if(L.isShowing()){var Y=R(l,".check-prefix");for(x=0;x<Y.length;x++){var E=Y[x];v=E.clientWidth,e=E.clientHeight,E.$48b=v,E.$49b=e,$.setCanvas(E,v,e)}var M=R(l,".radio-prefix");for(x=0;x<M.length;x++){var T=M[x];v=T.clientWidth,e=T.clientHeight,T.$48b=v,T.$49b=e,$.setCanvas(T,v,e)}var n=R(l,".contextmenu-item-icon");for(x=0;x<n.length;x++){var j=n[x];v=j.clientWidth,e=j.clientHeight,j.$48b=v,j.$49b=e,$.setCanvas(j,v,e)}}},validateImpl:function(){var P,r,j,X=this,v=X._view;if(X.isShowing()){var Y=R(v,".check-prefix");for(j=0;j<Y.length;j++){var d=Y[j];P=d.$48b,r=d.$49b,P&&r&&X.$46b(d,T.contextMenuCheckIcon,P,r)}var t=R(v,".radio-prefix");for(j=0;j<t.length;j++){var y=t[j];P=y.$48b,r=y.$49b,P&&r&&X.$46b(y,T.contextMenuRadioIcon,P,r)}var D=R(v,".contextmenu-item-icon");for(j=0;j<D.length;j++){var l=D[j];P=l.$48b,r=l.$49b,P&&r&&X.$46b(l,T.getImage(l.$50b),P,r,l._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);